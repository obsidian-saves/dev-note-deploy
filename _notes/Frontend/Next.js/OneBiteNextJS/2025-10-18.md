# 오늘 배운 내용 정리
인프런 한입 넥스트 시리즈를 통해 페이지 라우팅을 어떻게 구현하는지 공부하였다.
2가지 방법이 있었는데, 파일 이름으로 설정하는 것과 폴더 구조를 통한 라우팅 방법이였다.

## 파일 이름을 통한 라우팅
`src/pages` 내에서 test.tsx를 아래처럼 생성한다.
```tsx
export default function TestPage() {
  return <div>This is a test page.</div>;
}
```
이후, `npm run dev`를 통해 `localhost:3000/test` 접속 시 페이지가 잘 뜨는 모습을 확인할 수 있었다.

## 폴더 구조를 통한 라우팅
`src/pages` 내 search라는 폴더를 만든 후 그 안에 index.tsx를 아래와 같이 생성하였다.
```tsx
import { useRouter } from "next/router";

export default function Page() {
  const router = useRouter();

  const { q } = router.query; // ?q="some search"

  return <h1>search {q}</h1>;
}
```
`localhost:3000/search` 뒤에 ?q=로 작동하는 `쿼리 스트링`을 구현하기 위해 next에서 제공하는 useRouter를 가져온 후, q라는 상수를 정의하여 구현하였다.

만약 `localhost:3000/pages/search/setting` 이라는 다중 폴더를 구현하고 싶다면 search  폴더에 setting이라는 폴더를 만들고, 그 안에 index.tsx를 작업해주면 끝이다.

이후 만들 book 프로젝트를 위해 book이라는 폴더 구조를 생성하였다.
페이지 접속 시, `localhost:3000/book/{id}` 형태로 표시가 되어야하므로, [id].tsx라는 이름의 파일을 아래와 같이 생성하였다.
```tsx
import { useRouter } from "next/router";

export default function Page() {
  const router = useRouter();
  const { id } = router.query; // /book/[id]에서 id 값을 가져옴
  return <h1>Book {id}</h1>;
}
```

여러 개의 {id} 값을 url 주소에 쓰고 싶다면 [id].tsx를 [...id].tsx로 바꾸면 된다. 이를 `Catch All Segements`라고 부르는데, 이는 '모든 구간에 대응하는 페이지를 만들겠다'라는 뜻으로 보면 된다.

만약, id를 url 주소에 적지 않고 `localhost:3000/book`으로 접속하면 어떻게 될까?
![[Pasted image 20251018113654.png]]
사진과 같이 404 페이지 오류가 뜨는 모습을 볼 수 있다.

그렇다면 그저 book이라는 url 주소를 가진 페이지로 이동하려면 어떻게 해야할까?

첫 번째 방법은 book 폴더안에 index.tsx를 생성해주는 방법이다. 만약 첫 번째 방법을 쓰지 않는다면 기존의 [id].tsx에 대괄호를 한 번 더 달아 `[[id]].tsx`로 만들어주는 방법이 있다. 이를 `Optional Catch All Segments`라고 부른다.

## Link

## 프리패칭(Pre-Fetching)
페이지를 사전에 불러온다.

## API Routes